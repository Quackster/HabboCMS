Avatars={manageWindowParams:"toolbar=no,location=yes,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=602,height=697",linkAccountParams:"toolbar=no,location=yes,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=540,height=500",init:function(){Avatars.container=$("select-avatar");
Avatars.container.hide();Avatars.setHabbletForClient();Event.observe(Avatars.container,"click",Event.delegate({"a#manage-account":function(a){Event.stop(a);Avatars.showExternalInterface(Event.element(a),Avatars.manageWindowParams)},"div.avatar-select *":function(b){Event.stop(b);var a=Avatars.getHrefTagElement(Event.element(b)).href;
Avatars.switchAvatar(a)},"div#link-new-avatar *":function(a){Event.stop(a);AddAvatar.showAddAvatarInterface()},"a#back-link":function(a){Event.stop(a);Avatars.showMainInterface()},"a#account-link":function(a){Event.stop(a);Avatars.showExternalInterface(Event.element(a),Avatars.linkAccountParams)}}));
Avatars.container.show()},switchAvatar:function(a){new Ajax.Request(habboReqPath+"/clientlog/update",{method:"post",parameters:{flashStep:"client.avatar.select"},asynchronous:false});window.location.href=a+"&fromClient=true"},getHrefTagElement:function(a){while(a.tagName.toLowerCase()!="a"){a=a.parentNode
}return a},showExternalInterface:function(a,b){var c=window.open(a.href,"external_interface",b);if(window.focus){c.focus()}},showMainInterface:function(){new Ajax.Request("/client/avatars",{method:"get",onComplete:function(a){Avatars.container.update(a.responseText);Avatars.setup()}})},setHabbletForClient:function(){if(!!$("account-link")){$("account-link").href=$("account-link").href+"?popup=true"
}if(!!$("logout")){$("logout").hide()}if(!!$("first-avatar-info")){$("first-avatar-info").setStyle({paddingTop:"20px"})}if(!!$("first-avatar-play-link")){$("first-avatar-play-link").hide()}$$(".habblet-close").each(function(a){a.setStyle({visibility:"visible"})});$$("#select-avatar .other-avatars").each(function(a){a.setStyle({maxHeight:"150px"})
});$$("#select-avatar a.new-button").each(function(a){a.setStyle({"float":"right"})})},setup:function(){$("avatars").select(".habblet-close").each(function(a){$(a).observe("click",function(){HabbletLoader.hide($("avatars"))})});new Draggable(Avatars.container,{handle:Avatars.container.select(".title")[0],starteffect:null,endeffect:null});
Avatars.setHabbletForClient()}};AddAvatar={showAddAvatarInterface:function(){new Ajax.Request("/client/add_avatar",{method:"get",onComplete:function(a){Avatars.container.update(a.responseText);AddAvatar.init();Avatars.setup()}})},init:function(){if($("name-field-container")){$(document.body).addClassName("js");
$("habbo-name").focus();var c=function(d){Event.stop(d);new Ajax.Updater("name-field-container","/client/add_avatar",{parameters:{checkNameOnly:"true","bean.avatarName":$F("habbo-name")},onComplete:function(){if($("name-field-container").select(".state-error").length!=0){$("habbo-name").focus()}new Ajax.Updater("error-messages-container","/identity/add_avatar_messages");
$$("#select-avatar a.new-button").each(function(e){e.setStyle({"float":"right"})})}})};Event.observe($("name-field-container"),"click",Event.delegate({"#check-name-btn > *":c,"#check-name-btn":c,"#name-suggestion-list a":function(d){Event.stop(d);new Ajax.Updater("name-field-container","/client/add_avatar",{parameters:{checkNameOnly:"true","bean.avatarName":Event.element(d).innerHTML},onComplete:function(){if($("name-field-container").select(".state-error").length!=0){$("habbo-name").focus()
}new Ajax.Updater("error-messages-container","/identity/add_avatar_messages");$$("#select-avatar a.new-button").each(function(e){e.setStyle({"float":"right"})})}})}}));Event.observe($("name-field-container"),"keypress",Event.delegate({"#habbo-name":function(d){if(d.keyCode==Event.KEY_RETURN){Event.stop(d);
new Ajax.Updater("name-field-container","/client/add_avatar",{parameters:{checkNameOnly:"true","bean.avatarName":$F("habbo-name")},onComplete:function(){if($("name-field-container").select(".state-error").length!=0){$("habbo-name").focus()}new Ajax.Updater("error-messages-container","/identity/add_avatar_messages");
$$("#select-avatar a.new-button").each(function(e){e.setStyle({"float":"right"})})}})}}}))}if($("avatar-field-container")){var a=function(d){return function(f){Event.stop(f);new Ajax.Updater("selected-avatar","/client/add_avatar",{parameters:{checkFigureOnly:"true","bean.gender":d,"bean.figure":$(Event.element(f)).up("a").readAttribute("rel")}})
}};Event.observe($("avatar-field-container"),"click",Event.delegate({"a.female-avatar img":a("f"),"a.male-avatar img":a("m"),"#more-avatars":function(d){Event.stop(d);new Ajax.Updater("avatar-field-container","/client/add_avatar",{parameters:{refreshAvailableFigures:"true"}})}}))}if($("done-btn")){var b=$("done-btn");
Event.observe(b,"click",function(f){Event.stop(f);if(!b.hasClassName("__submitting__")){b.addClassName("__submitting__");var d=Form.serialize($("add-avatar-form"));new Ajax.Request("/client/add_avatar_do",{method:"post",parameters:d,onComplete:function(e,g){if(g&&g.redirectLocation){window.location.href=g.redirectLocation
}else{Avatars.container.update(e.responseText);Avatars.setup();AddAvatar.init()}}})}})}if($("popup-link")){Event.observe($("popup-link"),"click",function(d){Event.stop(d);window.open($("popup-link").href,"external-interface",Avatars.linkAccountParams)})}}};__avatars__defined__=true;